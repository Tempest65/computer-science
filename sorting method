import javax.swing.*;
import java.io.*;
import java.text.DecimalFormat;
import java.util.*;

public class unknown {
  
  
  //function that finds the index of province entered
  public static int findName (String array[], String name){
    //search the array
    for (int i = 0; i< array.length;i++) {
      if(array[i].equalsIgnoreCase(name)==true){
        return i;//province found, return the index of the province
      }
      
    }
    return -1;//not found, return a negative index
  }
  
  //function that gets the information of the province entered
  public static String getInfo (String nameToFind,String[] province,double totalArea[] ,double waterArea[] ,double water[],DecimalFormat percentFormat) throws IOException {
    String info ="";
    int loc = findName(province,nameToFind);
    
    //display the information of the celebrity
    if(loc >=0)  info = province[loc] + " has a total area of "    + totalArea[loc] +  ", water area of "  + waterArea[loc] + "and water percent of " + percentFormat.format(water[loc]);
    else info = nameToFind + " not found ";
    return info;
  }
  
  
  //function that gets number of lines
  public static int getLines() throws IOException{
    BufferedReader input = new BufferedReader(new FileReader("landwater.txt"));
    int lines = 0;
    while(input.readLine() != null) lines ++;
    input.close();
    lines = lines/3;
    return lines;
  }
  
  public static String sortArea(String[] province,double totalArea[] ,double waterArea[] ,double water[],DecimalFormat percentFormat)throws IOException {
    
    for (int i = 0 ; i < province.length ; i++)         {//loop through to compare two elements next to each other            
      for (int j = 0 ; j < province.length - 1 ; j++)            {//compare one element to the next               
        if (water [j] < water [j + 1])                {// swap net worth if not in descending order                    
          double tempWater = water [j];                    
          water [j] = water [j + 1];                    
          water [j + 1] = tempWater;// swap names to keep lists correct                    
          String tempProvince = province [j];                    
          province [j] = province [j + 1];                   
          province [j + 1] = tempProvince;
          double tempWaterArea = waterArea[j];
          waterArea[j]= waterArea[j+1];
          waterArea[j+1] = tempWaterArea;
          double tempArea = totalArea[j];
          totalArea [j] = totalArea[j+1];
          totalArea[j+1]= tempArea;
          
        }   
      }      
    }
    String list = View(province,totalArea,waterArea,water,percentFormat);
    
    return list;
    
  }
  
  public static String sortName(String[] province,double totalArea[] ,double waterArea[] ,double water[],DecimalFormat percentFormat)throws IOException {
    
    for (int i = 0 ; i < province.length ; i++)         {//loop through to compare two elements next to each other            
      for (int j = 0 ; j < province.length - 1 ; j++)            {//compare one element to the next               
        if (province[j].compareTo(province[j+1])<0)                {// swap net worth if not in descending order                    
          double tempWater = water [j];                    
          water [j] = water [j + 1];                    
          water [j + 1] = tempWater;// swap names to keep lists correct                    
          String tempProvince = province [j];                    
          province [j] = province [j + 1];                   
          province [j + 1] = tempProvince;
          double tempWaterArea = waterArea[j];
          waterArea[j]= waterArea[j+1];
          waterArea[j+1] = tempWaterArea;
          double tempArea = totalArea[j];
          totalArea [j] = totalArea[j+1];
          totalArea[j+1]= tempArea;
          
        }   
      }      
    }
    
    
    String list = View(province,totalArea,waterArea,water,percentFormat);
    return list;
    
  }
  
  
  public static String View (String[] province,double totalArea[] ,double waterArea[] ,double water[],DecimalFormat percentFormat)throws IOException {
    
    
    String list = "Province                                \tTotal Area(sq.km)              \tWater Area(sq.km)\t%Water\n";
    list = list + "\n======                                \t===============              \t===============\t=====\n";
    
    for (int i = 0; i <province.length;i++) {
      list = list + "\n" + province [i] + "                  \t"+ totalArea [i] + "                         \t" + waterArea [i] +  "                                 \t" + percentFormat.format(water[i]);  
    }
    
    return list;
  }
  
  public static String Read(String[] province,double totalArea[] ,double waterArea[] ,double water[],DecimalFormat percentFormat)throws IOException {
    
    String list = View(province,totalArea,waterArea,water,percentFormat);
    return list;
    
    
    
    
  }
  
  
  public static void main(String[] args) throws IOException {
    try{
    DecimalFormat percentFormat = new DecimalFormat ("##.##%");
    //declare variables
    String province [];
    double totalArea [],waterArea [],water[];
    String name=JOptionPane.showInputDialog(null,"Enter Name of file to be read","landwater.txt");
     
    BufferedReader input = new BufferedReader(new FileReader(name));
  
    int lines = getLines();
    //create arrays
    province = new String [lines];
    totalArea = new double [lines];
    waterArea = new double [lines];
    water = new double [lines];
    
    //String fileSort = "Original File";
    try{
    for (int i = 0;i < province.length;i++) {
      province [i] = input.readLine();
      totalArea [i] = Double.parseDouble(input.readLine());
      waterArea [i] = Double.parseDouble(input.readLine());
      water[i] = (waterArea [i]/totalArea [i]) ;//calclates water%
      
    }
     } catch (Exception error){JOptionPane.showMessageDialog(null, "FILE IS CORRUPT, UNABLE TO READ");System.exit(0);
      
    }
    try{
      String list = Read(province,totalArea,waterArea,water,percentFormat);
      JTextArea outputArea = new JTextArea();
      outputArea.setText(list);
      JOptionPane.showMessageDialog(null,outputArea,"Original File", JOptionPane.INFORMATION_MESSAGE);
      
    } catch (Exception error){
      
    }
    
    try{
      String list = sortArea(province,totalArea,waterArea,water,percentFormat);
      JTextArea outputArea = new JTextArea();
      outputArea.setText(list);
      JOptionPane.showMessageDialog(null,outputArea,"Sorted in Alphabetical Order", JOptionPane.INFORMATION_MESSAGE);
    } catch (Exception error){
    }
    
    try{
      String list = sortName(province,totalArea,waterArea,water,percentFormat);
      JTextArea outputArea = new JTextArea();
      outputArea.setText(list);
      JOptionPane.showMessageDialog(null,outputArea,"Sorted in Alphabetical Order", JOptionPane.INFORMATION_MESSAGE);
    } catch (Exception error){
    }
    
    try{
      String find = JOptionPane.showInputDialog(null,"Enter name of province to get info");
      String list = getInfo(find,province,totalArea,waterArea,water,percentFormat);
      JTextArea outputArea = new JTextArea();
      outputArea.setText(list);
      JOptionPane.showMessageDialog(null,outputArea,"Info", JOptionPane.INFORMATION_MESSAGE);
    } catch (Exception error){
    }
    
    input.close();
    } catch (Exception error){JOptionPane.showMessageDialog(null, "ERROR IN FILE, PLEASE ENTER LEGITIMATE FILE NAME");System.exit(0);
    }
  } 
}
